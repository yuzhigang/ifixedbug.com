<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OPC UA on iFixedBug.com</title><link>https://www.ifixedbug.com/tags/opc-ua/</link><description>Recent content in OPC UA on iFixedBug.com</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Tue, 05 Mar 2024 12:12:22 +0000</lastBuildDate><atom:link href="https://www.ifixedbug.com/tags/opc-ua/index.xml" rel="self" type="application/rss+xml"/><item><title>OPC DA转成OPC UA</title><link>https://www.ifixedbug.com/posts/opu-da%E8%BD%AC%E6%88%90ua%E7%9A%84%E6%96%B9%E6%B3%95/</link><pubDate>Tue, 05 Mar 2024 12:12:22 +0000</pubDate><guid>https://www.ifixedbug.com/posts/opu-da%E8%BD%AC%E6%88%90ua%E7%9A%84%E6%96%B9%E6%B3%95/</guid><description>OPC # OPC DA（Classic） 和OPC UA的链接方法 # 在仅支持OPC DA 2.0的OPC SERVER上部署代理程序（COM Wrapper），然后发布成 UA SERVER。从： https://github.com/OPCFoundation/UA-.NET-Legacy 下载兼容版的UA-.NET，因为是源代码基于.net framework3.5编写的，故3.5~4.5.1之间的framework都可以运行。因为要兼容windows XP系统，XP最新只能到Framework4.0， 故改成4.0的框架。 几个重要的配置，在Opc.Ua.ComServerWrapper.Config.xml文件中：
&amp;lt;BaseAddresses&amp;gt; &amp;lt;ua:String&amp;gt;opc.tcp://localhost:48400/UA/ComServerWrapper&amp;lt;/ua:String&amp;gt; &amp;lt;ua:String&amp;gt;http://localhost:48401/UA/ComServerWrapper&amp;lt;/ua:String&amp;gt; &amp;lt;/BaseAddresses&amp;gt;以上指明发布的ua地址，tcp和http都可以。
&amp;lt;ServerSecurityPolicy&amp;gt; &amp;lt;SecurityMode&amp;gt;None_1&amp;lt;/SecurityMode&amp;gt; &amp;lt;SecurityPolicyUri&amp;gt;http://opcfoundation.org/UA/SecurityPolicy#None&amp;lt;/SecurityPolicyUri&amp;gt; &amp;lt;SecurityLevel&amp;gt;0&amp;lt;/SecurityLevel&amp;gt; &amp;lt;/ServerSecurityPolicy&amp;gt;以上指明认证方式，把其他的去掉，只保留不需认证方式。其他认证方式暂时没有研究。
&amp;lt;ComClientConfiguration i:type=&amp;#34;ComDaClientConfiguration&amp;#34;&amp;gt; &amp;lt;ServerUrl&amp;gt;opc.com://localhost/ProcessIT.SimulationSvr.1&amp;lt;/ServerUrl&amp;gt; &amp;lt;ServerName&amp;gt;DA&amp;lt;/ServerName&amp;gt; &amp;lt;MaxReconnectWait&amp;gt;10000&amp;lt;/MaxReconnectWait&amp;gt; &amp;lt;SeperatorChars&amp;gt;&amp;lt;/SeperatorChars&amp;gt; &amp;lt;AvailableLocales&amp;gt; &amp;lt;ua:String&amp;gt;en-US&amp;lt;/ua:String&amp;gt; &amp;lt;ua:String&amp;gt;de-DE&amp;lt;/ua:String&amp;gt; &amp;lt;ua:String&amp;gt;ja-JP&amp;lt;/ua:String&amp;gt; &amp;lt;/AvailableLocales&amp;gt; &amp;lt;BrowseToNotSupported&amp;gt;false&amp;lt;/BrowseToNotSupported&amp;gt; &amp;lt;/ComClientConfiguration&amp;gt;以上配置本地的OPC Server地址和名称。该配置节可以有多个，ServerName可以换成语义化的名称，并不强求一致。 运行UA COM Server Wrapper.sln项目，编译后有UA COM Server Wrapper.exe，直接使用会报错，需要拷贝Opc.Ua.CertificateGenerator.exe，产生证书。 把该程序拷贝到OPC Server的机器上，配置本地的OPC Server地址和名称。双击UA COM Server Wrapper.exe运行，会产生一个地址：opc.tcp://39.107.78.139:8888/UA/ComServerWrapper，使用一般的OPC UA 客户端，点击链接即可浏览数据了。
Modbus # 线圈状态/输入状态/保持寄存器/输入寄存器: coilStatus/inputStatus/holdingRegister/inputRegister</description></item></channel></rss>